{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar AbstractExpandedDecoder_1 = require(\"./AbstractExpandedDecoder\");\nvar AI01decoder = /** @class */function (_super) {\n  __extends(AI01decoder, _super);\n  function AI01decoder(information) {\n    return _super.call(this, information) || this;\n  }\n  AI01decoder.prototype.encodeCompressedGtin = function (buf, currentPos) {\n    buf.append(\"(01)\");\n    var initialPosition = buf.length();\n    buf.append('9');\n    this.encodeCompressedGtinWithoutAI(buf, currentPos, initialPosition);\n  };\n  AI01decoder.prototype.encodeCompressedGtinWithoutAI = function (buf, currentPos, initialBufferPosition) {\n    for (var i = 0; i < 4; ++i) {\n      var currentBlock = this.getGeneralDecoder().extractNumericValueFromBitArray(currentPos + 10 * i, 10);\n      if (currentBlock / 100 == 0) {\n        buf.append('0');\n      }\n      if (currentBlock / 10 == 0) {\n        buf.append('0');\n      }\n      buf.append(currentBlock);\n    }\n    AI01decoder.appendCheckDigit(buf, initialBufferPosition);\n  };\n  AI01decoder.appendCheckDigit = function (buf, currentPos) {\n    var checkDigit = 0;\n    for (var i = 0; i < 13; i++) {\n      //let digit = buf.charAt(i + currentPos) - '0';\n      //To be checked\n      var digit = buf.charAt(i + currentPos).charCodeAt(0) - '0'.charCodeAt(0);\n      checkDigit += (i & 0x01) == 0 ? 3 * digit : digit;\n    }\n    checkDigit = 10 - checkDigit % 10;\n    if (checkDigit == 10) {\n      checkDigit = 0;\n    }\n    buf.append(checkDigit);\n  };\n  AI01decoder.GTIN_SIZE = 40;\n  return AI01decoder;\n}(AbstractExpandedDecoder_1.default);\nexports.default = AI01decoder;","map":{"version":3,"names":["AbstractExpandedDecoder_1","require","AI01decoder","_super","__extends","information","call","prototype","encodeCompressedGtin","buf","currentPos","append","initialPosition","length","encodeCompressedGtinWithoutAI","initialBufferPosition","i","currentBlock","getGeneralDecoder","extractNumericValueFromBitArray","appendCheckDigit","checkDigit","digit","charAt","charCodeAt","GTIN_SIZE","default"],"sources":["../../../../../../src/core/oned/rss/expanded/decoders/AI01decoder.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACA,IAAAA,yBAAA,GAAAC,OAAA;AAEA,IAAAC,WAAA,0BAAAC,MAAA;EAAkDC,SAAA,CAAAF,WAAA,EAAAC,MAAA;EAIhD,SAAAD,YAAYG,WAAqB;WAC/BF,MAAA,CAAAG,IAAA,OAAMD,WAAW,CAAC;EACpB;EACEH,WAAA,CAAAK,SAAA,CAAAC,oBAAoB,GAApB,UAAqBC,GAAiB,EAAEC,UAAiB;IACzDD,GAAG,CAACE,MAAM,CAAC,MAAM,CAAC;IAClB,IAAIC,eAAe,GAAGH,GAAG,CAACI,MAAM,EAAE;IAClCJ,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC;IAEf,IAAI,CAACG,6BAA6B,CAACL,GAAG,EAAEC,UAAU,EAAEE,eAAe,CAAC;EACtE,CAAC;EAEFV,WAAA,CAAAK,SAAA,CAAAO,6BAA6B,GAA7B,UAA+BL,GAAiB,EAAEC,UAAiB,EAAEK,qBAA4B;IAC9F,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAE,EAAEA,CAAC,EAAE;MAC1B,IAAIC,YAAY,GAAG,IAAI,CAACC,iBAAiB,EAAE,CAACC,+BAA+B,CAACT,UAAU,GAAG,EAAE,GAAGM,CAAC,EAAE,EAAE,CAAC;MACpG,IAAIC,YAAY,GAAG,GAAG,IAAI,CAAC,EAAE;QAC3BR,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC;;MAEjB,IAAIM,YAAY,GAAG,EAAE,IAAI,CAAC,EAAE;QAC1BR,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC;;MAEjBF,GAAG,CAACE,MAAM,CAACM,YAAY,CAAC;;IAGxBf,WAAW,CAACkB,gBAAgB,CAACX,GAAG,EAAEM,qBAAqB,CAAC;EAC5D,CAAC;EAEeb,WAAA,CAAAkB,gBAAgB,GAAhC,UAAiCX,GAAiB,EAAEC,UAAiB;IACnE,IAAIW,UAAU,GAAG,CAAC;IAClB,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;MAC3B;MACA;MACA,IAAIM,KAAK,GAAGb,GAAG,CAACc,MAAM,CAACP,CAAC,GAAGN,UAAU,CAAC,CAACc,UAAU,CAAC,CAAC,CAAC,GAAG,GAAG,CAACA,UAAU,CAAC,CAAC,CAAC;MACxEH,UAAU,IAAI,CAACL,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,GAAGM,KAAK,GAAGA,KAAK;;IAGnDD,UAAU,GAAG,EAAE,GAAIA,UAAU,GAAG,EAAG;IACnC,IAAIA,UAAU,IAAI,EAAE,EAAE;MACpBA,UAAU,GAAG,CAAC;;IAGhBZ,GAAG,CAACE,MAAM,CAACU,UAAU,CAAC;EACxB,CAAC;EA3CgBnB,WAAA,CAAAuB,SAAS,GAAU,EAAE;EA6CxC,OAAAvB,WAAC;CAAA,CA/CiDF,yBAAA,CAAA0B,OAAuB;kBAA3CxB,WAAW"},"metadata":{},"sourceType":"script"}