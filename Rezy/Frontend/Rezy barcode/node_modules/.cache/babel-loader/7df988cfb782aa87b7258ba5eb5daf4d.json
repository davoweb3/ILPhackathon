{"ast":null,"code":"\"use strict\";\n\nvar __values = this && this.__values || function (o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n    i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * RSS util functions.\n */\nvar RSSUtils = /** @class */function () {\n  function RSSUtils() {}\n  RSSUtils.prototype.RSSUtils = function () {};\n  RSSUtils.getRSSvalue = function (widths, maxWidth, noNarrow) {\n    var e_1, _a;\n    var n = 0;\n    try {\n      for (var widths_1 = __values(widths), widths_1_1 = widths_1.next(); !widths_1_1.done; widths_1_1 = widths_1.next()) {\n        var width = widths_1_1.value;\n        n += width;\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (widths_1_1 && !widths_1_1.done && (_a = widths_1.return)) _a.call(widths_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    var val = 0;\n    var narrowMask = 0;\n    var elements = widths.length;\n    for (var bar = 0; bar < elements - 1; bar++) {\n      var elmWidth = void 0;\n      for (elmWidth = 1, narrowMask |= 1 << bar; elmWidth < widths[bar]; elmWidth++, narrowMask &= ~(1 << bar)) {\n        var subVal = RSSUtils.combins(n - elmWidth - 1, elements - bar - 2);\n        if (noNarrow && narrowMask === 0 && n - elmWidth - (elements - bar - 1) >= elements - bar - 1) {\n          subVal -= RSSUtils.combins(n - elmWidth - (elements - bar), elements - bar - 2);\n        }\n        if (elements - bar - 1 > 1) {\n          var lessVal = 0;\n          for (var mxwElement = n - elmWidth - (elements - bar - 2); mxwElement > maxWidth; mxwElement--) {\n            lessVal += RSSUtils.combins(n - elmWidth - mxwElement - 1, elements - bar - 3);\n          }\n          subVal -= lessVal * (elements - 1 - bar);\n        } else if (n - elmWidth > maxWidth) {\n          subVal--;\n        }\n        val += subVal;\n      }\n      n -= elmWidth;\n    }\n    return val;\n  };\n  RSSUtils.combins = function (n, r) {\n    var maxDenom;\n    var minDenom;\n    if (n - r > r) {\n      minDenom = r;\n      maxDenom = n - r;\n    } else {\n      minDenom = n - r;\n      maxDenom = r;\n    }\n    var val = 1;\n    var j = 1;\n    for (var i = n; i > maxDenom; i--) {\n      val *= i;\n      if (j <= minDenom) {\n        val /= j;\n        j++;\n      }\n    }\n    while (j <= minDenom) {\n      val /= j;\n      j++;\n    }\n    return val;\n  };\n  return RSSUtils;\n}();\nexports.default = RSSUtils;","map":{"version":3,"names":["RSSUtils","prototype","getRSSvalue","widths","maxWidth","noNarrow","n","widths_1","__values","widths_1_1","next","done","width","value","val","narrowMask","elements","length","bar","elmWidth","subVal","combins","lessVal","mxwElement","r","maxDenom","minDenom","j","i"],"sources":["../../../../src/core/oned/rss/RSSUtils.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;AAGA,IAAAA,QAAA;EAAA,SAAAA,SAAA,GA4DA;EA1DYA,QAAA,CAAAC,SAAA,CAAAD,QAAQ,GAAhB,aAAqB,CAAC;EAERA,QAAA,CAAAE,WAAW,GAAzB,UAA0BC,MAAgB,EAAEC,QAAgB,EAAEC,QAAiB;;IAC3E,IAAIC,CAAC,GAAG,CAAC;;MACT,KAAkB,IAAAC,QAAA,GAAAC,QAAA,CAAAL,MAAM,GAAAM,UAAA,GAAAF,QAAA,CAAAG,IAAA,KAAAD,UAAA,CAAAE,IAAA,EAAAF,UAAA,GAAAF,QAAA,CAAAG,IAAA,IAAE;QAArB,IAAIE,KAAK,GAAAH,UAAA,CAAAI,KAAA;QACVP,CAAC,IAAIM,KAAK;;;;;;;;;;;;;IAEd,IAAIE,GAAG,GAAG,CAAC;IACX,IAAIC,UAAU,GAAG,CAAC;IAClB,IAAIC,QAAQ,GAAGb,MAAM,CAACc,MAAM;IAC5B,KAAK,IAAIC,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGF,QAAQ,GAAG,CAAC,EAAEE,GAAG,EAAE,EAAE;MACzC,IAAIC,QAAQ;MACZ,KAAKA,QAAQ,GAAG,CAAC,EAAEJ,UAAU,IAAI,CAAC,IAAIG,GAAG,EAAEC,QAAQ,GAAGhB,MAAM,CAACe,GAAG,CAAC,EAAEC,QAAQ,EAAE,EAAGJ,UAAU,IAAI,EAAE,CAAC,IAAIG,GAAG,CAAC,EAAE;QACvG,IAAIE,MAAM,GAAGpB,QAAQ,CAACqB,OAAO,CAACf,CAAC,GAAGa,QAAQ,GAAG,CAAC,EAAEH,QAAQ,GAAGE,GAAG,GAAG,CAAC,CAAC;QACnE,IAAIb,QAAQ,IAAKU,UAAU,KAAK,CAAE,IAAKT,CAAC,GAAGa,QAAQ,IAAIH,QAAQ,GAAGE,GAAG,GAAG,CAAC,CAAC,IAAIF,QAAQ,GAAGE,GAAG,GAAG,CAAE,EAAE;UAC/FE,MAAM,IAAIpB,QAAQ,CAACqB,OAAO,CAACf,CAAC,GAAGa,QAAQ,IAAIH,QAAQ,GAAGE,GAAG,CAAC,EAAEF,QAAQ,GAAGE,GAAG,GAAG,CAAC,CAAC;;QAEnF,IAAIF,QAAQ,GAAGE,GAAG,GAAG,CAAC,GAAG,CAAC,EAAE;UACxB,IAAII,OAAO,GAAG,CAAC;UACf,KAAK,IAAIC,UAAU,GAAGjB,CAAC,GAAGa,QAAQ,IAAIH,QAAQ,GAAGE,GAAG,GAAG,CAAC,CAAC,EAAEK,UAAU,GAAGnB,QAAQ,EAAEmB,UAAU,EAAE,EAAE;YAC5FD,OAAO,IAAItB,QAAQ,CAACqB,OAAO,CAACf,CAAC,GAAGa,QAAQ,GAAGI,UAAU,GAAG,CAAC,EAAEP,QAAQ,GAAGE,GAAG,GAAG,CAAC,CAAC;;UAElFE,MAAM,IAAIE,OAAO,IAAIN,QAAQ,GAAG,CAAC,GAAGE,GAAG,CAAC;SAC3C,MAAM,IAAIZ,CAAC,GAAGa,QAAQ,GAAGf,QAAQ,EAAE;UAChCgB,MAAM,EAAE;;QAEZN,GAAG,IAAIM,MAAM;;MAEjBd,CAAC,IAAIa,QAAQ;;IAEjB,OAAOL,GAAG;EACd,CAAC;EAEcd,QAAA,CAAAqB,OAAO,GAAtB,UAAuBf,CAAS,EAAEkB,CAAS;IACvC,IAAIC,QAAQ;IACZ,IAAIC,QAAQ;IACZ,IAAIpB,CAAC,GAAGkB,CAAC,GAAGA,CAAC,EAAE;MACXE,QAAQ,GAAGF,CAAC;MACZC,QAAQ,GAAGnB,CAAC,GAAGkB,CAAC;KACnB,MAAM;MACHE,QAAQ,GAAGpB,CAAC,GAAGkB,CAAC;MAChBC,QAAQ,GAAGD,CAAC;;IAEhB,IAAIV,GAAG,GAAG,CAAC;IACX,IAAIa,CAAC,GAAG,CAAC;IACT,KAAK,IAAIC,CAAC,GAAWtB,CAAC,EAAEsB,CAAC,GAAGH,QAAQ,EAAEG,CAAC,EAAE,EAAE;MACvCd,GAAG,IAAIc,CAAC;MACR,IAAID,CAAC,IAAID,QAAQ,EAAE;QACfZ,GAAG,IAAIa,CAAC;QACRA,CAAC,EAAE;;;IAGX,OAAQA,CAAC,IAAID,QAAQ,EAAG;MACpBZ,GAAG,IAAIa,CAAC;MACRA,CAAC,EAAE;;IAEP,OAAOb,GAAG;EACd,CAAC;EACL,OAAAd,QAAC;AAAD,CAAC,EA5DD"},"metadata":{},"sourceType":"script"}