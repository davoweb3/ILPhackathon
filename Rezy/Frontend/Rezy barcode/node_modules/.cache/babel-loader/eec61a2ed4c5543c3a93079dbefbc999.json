{"ast":null,"code":"/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n  navigator.getUserMedia = function (constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n  if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function (obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function () {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function (c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}","map":{"version":3,"names":["utils","shimGetUserMedia","window","browserDetails","navigator","MediaStreamTrack","getUserMedia","constraints","onSuccess","onError","deprecated","mediaDevices","then","version","getSupportedConstraints","remap","obj","a","b","nativeGetUserMedia","bind","c","audio","JSON","parse","stringify","prototype","getSettings","nativeGetSettings","apply","arguments","applyConstraints","nativeApplyConstraints","kind"],"sources":["/home/cedarmat/rezy2/rezyonrafiki/Rezy/Frontend/Rezy barcode/scanner/scanner/node_modules/webrtc-adapter/src/js/firefox/getusermedia.js"],"sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}