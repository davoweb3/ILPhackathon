{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst react_1 = __importDefault(require(\"react\"));\nconst library_1 = require(\"@zxing/library\");\nconst react_webcam_1 = __importDefault(require(\"react-webcam\"));\nconst BarcodeScannerComponent = _ref => {\n  let {\n    onUpdate,\n    onError,\n    width = \"100%\",\n    height = \"100%\",\n    facingMode = \"environment\",\n    torch,\n    delay = 500,\n    videoConstraints,\n    stopStream\n  } = _ref;\n  const webcamRef = react_1.default.useRef(null);\n  const capture = react_1.default.useCallback(() => {\n    var _a;\n    const codeReader = new library_1.BrowserMultiFormatReader();\n    const imageSrc = (_a = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _a === void 0 ? void 0 : _a.getScreenshot();\n    if (imageSrc) {\n      codeReader.decodeFromImage(undefined, imageSrc).then(result => {\n        onUpdate(null, result);\n      }).catch(err => {\n        onUpdate(err);\n      });\n    }\n  }, [onUpdate]);\n  react_1.default.useEffect(() => {\n    var _a, _b;\n    // Turn on the flashlight if prop is defined and device has the capability\n    if (typeof torch === \"boolean\" && ((_a =\n    // @ts-ignore\n    navigator === null ||\n    // @ts-ignore\n    navigator === void 0 ? void 0 :\n    // @ts-ignore\n    navigator.mediaDevices) === null || _a === void 0 ? void 0 : _a.getSupportedConstraints().torch)) {\n      const stream = (_b = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _b === void 0 ? void 0 : _b.video.srcObject;\n      const track = stream === null || stream === void 0 ? void 0 : stream.getVideoTracks()[0]; // get the active track of the stream\n      if (track && track.getCapabilities().torch && !track.getConstraints().torch) {\n        track.applyConstraints({\n          advanced: [{\n            torch\n          }]\n        }).catch(err => onUpdate(err));\n      }\n    }\n  }, [torch, onUpdate]);\n  react_1.default.useEffect(() => {\n    var _a;\n    if (stopStream) {\n      let stream = (_a = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _a === void 0 ? void 0 : _a.video.srcObject;\n      if (stream) {\n        stream.getTracks().forEach(track => {\n          stream.removeTrack(track);\n          track.stop();\n        });\n        stream = null;\n      }\n    }\n  }, [stopStream]);\n  react_1.default.useEffect(() => {\n    const interval = setInterval(capture, delay);\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n  return react_1.default.createElement(react_webcam_1.default, {\n    width: width,\n    height: height,\n    ref: webcamRef,\n    screenshotFormat: \"image/jpeg\",\n    videoConstraints: videoConstraints || {\n      facingMode\n    },\n    audio: false,\n    onUserMediaError: onError\n  });\n};\nexports.default = BarcodeScannerComponent;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","react_1","require","library_1","react_webcam_1","BarcodeScannerComponent","_ref","onUpdate","onError","width","height","facingMode","torch","delay","videoConstraints","stopStream","webcamRef","default","useRef","capture","useCallback","_a","codeReader","BrowserMultiFormatReader","imageSrc","current","getScreenshot","decodeFromImage","undefined","then","result","catch","err","useEffect","_b","navigator","mediaDevices","getSupportedConstraints","stream","video","srcObject","track","getVideoTracks","getCapabilities","getConstraints","applyConstraints","advanced","getTracks","forEach","removeTrack","stop","interval","setInterval","clearInterval","createElement","ref","screenshotFormat","audio","onUserMediaError"],"sources":["/home/cedarmat/Rezy/Frontend/Rezy barcode/scanner/scanner/node_modules/react-qr-barcode-scanner/dist/BarcodeScannerComponent.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst library_1 = require(\"@zxing/library\");\nconst react_webcam_1 = __importDefault(require(\"react-webcam\"));\nconst BarcodeScannerComponent = ({ onUpdate, onError, width = \"100%\", height = \"100%\", facingMode = \"environment\", torch, delay = 500, videoConstraints, stopStream, }) => {\n    const webcamRef = react_1.default.useRef(null);\n    const capture = react_1.default.useCallback(() => {\n        var _a;\n        const codeReader = new library_1.BrowserMultiFormatReader();\n        const imageSrc = (_a = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _a === void 0 ? void 0 : _a.getScreenshot();\n        if (imageSrc) {\n            codeReader\n                .decodeFromImage(undefined, imageSrc)\n                .then((result) => {\n                onUpdate(null, result);\n            })\n                .catch((err) => {\n                onUpdate(err);\n            });\n        }\n    }, [onUpdate]);\n    react_1.default.useEffect(() => {\n        var _a, _b;\n        // Turn on the flashlight if prop is defined and device has the capability\n        if (typeof torch === \"boolean\" && ((_a = \n        // @ts-ignore\n        navigator === null || \n        // @ts-ignore\n        navigator === void 0 ? void 0 : \n        // @ts-ignore\n        navigator.mediaDevices) === null || _a === void 0 ? void 0 : _a.getSupportedConstraints().torch)) {\n            const stream = (_b = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _b === void 0 ? void 0 : _b.video.srcObject;\n            const track = stream === null || stream === void 0 ? void 0 : stream.getVideoTracks()[0]; // get the active track of the stream\n            if (track &&\n                track.getCapabilities().torch &&\n                !track.getConstraints().torch) {\n                track\n                    .applyConstraints({\n                    advanced: [{ torch }],\n                })\n                    .catch((err) => onUpdate(err));\n            }\n        }\n    }, [torch, onUpdate]);\n    react_1.default.useEffect(() => {\n        var _a;\n        if (stopStream) {\n            let stream = (_a = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _a === void 0 ? void 0 : _a.video.srcObject;\n            if (stream) {\n                stream.getTracks().forEach((track) => {\n                    stream.removeTrack(track);\n                    track.stop();\n                });\n                stream = null;\n            }\n        }\n    }, [stopStream]);\n    react_1.default.useEffect(() => {\n        const interval = setInterval(capture, delay);\n        return () => {\n            clearInterval(interval);\n        };\n    }, []);\n    return (react_1.default.createElement(react_webcam_1.default, { width: width, height: height, ref: webcamRef, screenshotFormat: \"image/jpeg\", videoConstraints: videoConstraints || {\n            facingMode,\n        }, audio: false, onUserMediaError: onError }));\n};\nexports.default = BarcodeScannerComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}