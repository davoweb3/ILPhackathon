{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar react_1 = __importDefault(require(\"react\"));\nvar library_1 = require(\"@zxing/library\");\nvar react_webcam_1 = __importDefault(require(\"react-webcam\"));\nvar BarcodeScannerComponent = function BarcodeScannerComponent(_ref) {\n  var onUpdate = _ref.onUpdate,\n    onError = _ref.onError,\n    _ref$width = _ref.width,\n    width = _ref$width === void 0 ? \"100%\" : _ref$width,\n    _ref$height = _ref.height,\n    height = _ref$height === void 0 ? \"100%\" : _ref$height,\n    _ref$facingMode = _ref.facingMode,\n    facingMode = _ref$facingMode === void 0 ? \"environment\" : _ref$facingMode,\n    torch = _ref.torch,\n    _ref$delay = _ref.delay,\n    delay = _ref$delay === void 0 ? 500 : _ref$delay,\n    videoConstraints = _ref.videoConstraints,\n    stopStream = _ref.stopStream;\n  var webcamRef = react_1.default.useRef(null);\n  var capture = react_1.default.useCallback(function () {\n    var _a;\n    var codeReader = new library_1.BrowserMultiFormatReader();\n    var imageSrc = (_a = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _a === void 0 ? void 0 : _a.getScreenshot();\n    if (imageSrc) {\n      codeReader.decodeFromImage(undefined, imageSrc).then(function (result) {\n        onUpdate(null, result);\n      }).catch(function (err) {\n        onUpdate(err);\n      });\n    }\n  }, [onUpdate]);\n  react_1.default.useEffect(function () {\n    var _a, _b;\n    // Turn on the flashlight if prop is defined and device has the capability\n    if (typeof torch === \"boolean\" && ((_a =\n    // @ts-ignore\n    navigator === null ||\n    // @ts-ignore\n    navigator === void 0 ? void 0 :\n    // @ts-ignore\n    navigator.mediaDevices) === null || _a === void 0 ? void 0 : _a.getSupportedConstraints().torch)) {\n      var stream = (_b = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _b === void 0 ? void 0 : _b.video.srcObject;\n      var track = stream === null || stream === void 0 ? void 0 : stream.getVideoTracks()[0]; // get the active track of the stream\n      if (track && track.getCapabilities().torch && !track.getConstraints().torch) {\n        track.applyConstraints({\n          advanced: [{\n            torch: torch\n          }]\n        }).catch(function (err) {\n          return onUpdate(err);\n        });\n      }\n    }\n  }, [torch, onUpdate]);\n  react_1.default.useEffect(function () {\n    var _a;\n    if (stopStream) {\n      var stream = (_a = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _a === void 0 ? void 0 : _a.video.srcObject;\n      if (stream) {\n        stream.getTracks().forEach(function (track) {\n          stream.removeTrack(track);\n          track.stop();\n        });\n        stream = null;\n      }\n    }\n  }, [stopStream]);\n  react_1.default.useEffect(function () {\n    var interval = setInterval(capture, delay);\n    return function () {\n      clearInterval(interval);\n    };\n  }, []);\n  return react_1.default.createElement(react_webcam_1.default, {\n    width: width,\n    height: height,\n    ref: webcamRef,\n    screenshotFormat: \"image/jpeg\",\n    videoConstraints: videoConstraints || {\n      facingMode: facingMode\n    },\n    audio: false,\n    onUserMediaError: onError\n  });\n};\nexports.default = BarcodeScannerComponent;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","react_1","require","library_1","react_webcam_1","BarcodeScannerComponent","_ref","onUpdate","onError","_ref$width","width","_ref$height","height","_ref$facingMode","facingMode","torch","_ref$delay","delay","videoConstraints","stopStream","webcamRef","default","useRef","capture","useCallback","_a","codeReader","BrowserMultiFormatReader","imageSrc","current","getScreenshot","decodeFromImage","undefined","then","result","catch","err","useEffect","_b","navigator","mediaDevices","getSupportedConstraints","stream","video","srcObject","track","getVideoTracks","getCapabilities","getConstraints","applyConstraints","advanced","getTracks","forEach","removeTrack","stop","interval","setInterval","clearInterval","createElement","ref","screenshotFormat","audio","onUserMediaError"],"sources":["C:/Users/DAVOTRADE/Desktop/Rezy barcode/scanner/scanner/node_modules/react-qr-barcode-scanner/dist/BarcodeScannerComponent.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst library_1 = require(\"@zxing/library\");\nconst react_webcam_1 = __importDefault(require(\"react-webcam\"));\nconst BarcodeScannerComponent = ({ onUpdate, onError, width = \"100%\", height = \"100%\", facingMode = \"environment\", torch, delay = 500, videoConstraints, stopStream, }) => {\n    const webcamRef = react_1.default.useRef(null);\n    const capture = react_1.default.useCallback(() => {\n        var _a;\n        const codeReader = new library_1.BrowserMultiFormatReader();\n        const imageSrc = (_a = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _a === void 0 ? void 0 : _a.getScreenshot();\n        if (imageSrc) {\n            codeReader\n                .decodeFromImage(undefined, imageSrc)\n                .then((result) => {\n                onUpdate(null, result);\n            })\n                .catch((err) => {\n                onUpdate(err);\n            });\n        }\n    }, [onUpdate]);\n    react_1.default.useEffect(() => {\n        var _a, _b;\n        // Turn on the flashlight if prop is defined and device has the capability\n        if (typeof torch === \"boolean\" && ((_a = \n        // @ts-ignore\n        navigator === null || \n        // @ts-ignore\n        navigator === void 0 ? void 0 : \n        // @ts-ignore\n        navigator.mediaDevices) === null || _a === void 0 ? void 0 : _a.getSupportedConstraints().torch)) {\n            const stream = (_b = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _b === void 0 ? void 0 : _b.video.srcObject;\n            const track = stream === null || stream === void 0 ? void 0 : stream.getVideoTracks()[0]; // get the active track of the stream\n            if (track &&\n                track.getCapabilities().torch &&\n                !track.getConstraints().torch) {\n                track\n                    .applyConstraints({\n                    advanced: [{ torch }],\n                })\n                    .catch((err) => onUpdate(err));\n            }\n        }\n    }, [torch, onUpdate]);\n    react_1.default.useEffect(() => {\n        var _a;\n        if (stopStream) {\n            let stream = (_a = webcamRef === null || webcamRef === void 0 ? void 0 : webcamRef.current) === null || _a === void 0 ? void 0 : _a.video.srcObject;\n            if (stream) {\n                stream.getTracks().forEach((track) => {\n                    stream.removeTrack(track);\n                    track.stop();\n                });\n                stream = null;\n            }\n        }\n    }, [stopStream]);\n    react_1.default.useEffect(() => {\n        const interval = setInterval(capture, delay);\n        return () => {\n            clearInterval(interval);\n        };\n    }, []);\n    return (react_1.default.createElement(react_webcam_1.default, { width: width, height: height, ref: webcamRef, screenshotFormat: \"image/jpeg\", videoConstraints: videoConstraints || {\n            facingMode,\n        }, audio: false, onUserMediaError: onError }));\n};\nexports.default = BarcodeScannerComponent;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,eAAe,GAAI,IAAI,IAAI,IAAI,CAACA,eAAe,IAAK,UAAUC,GAAG,EAAE;EACnE,OAAQA,GAAG,IAAIA,GAAG,CAACC,UAAU,GAAID,GAAG,GAAG;IAAE,SAAS,EAAEA;EAAI,CAAC;AAC7D,CAAC;AACDE,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,IAAMC,OAAO,GAAGP,eAAe,CAACQ,OAAO,CAAC,OAAO,CAAC,CAAC;AACjD,IAAMC,SAAS,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AAC3C,IAAME,cAAc,GAAGV,eAAe,CAACQ,OAAO,CAAC,cAAc,CAAC,CAAC;AAC/D,IAAMG,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAAC,IAAA,EAA8I;EAAA,IAAxIC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;IAAEC,OAAO,GAAAF,IAAA,CAAPE,OAAO;IAAAC,UAAA,GAAAH,IAAA,CAAEI,KAAK;IAALA,KAAK,GAAAD,UAAA,cAAG,MAAM,GAAAA,UAAA;IAAAE,WAAA,GAAAL,IAAA,CAAEM,MAAM;IAANA,MAAM,GAAAD,WAAA,cAAG,MAAM,GAAAA,WAAA;IAAAE,eAAA,GAAAP,IAAA,CAAEQ,UAAU;IAAVA,UAAU,GAAAD,eAAA,cAAG,aAAa,GAAAA,eAAA;IAAEE,KAAK,GAAAT,IAAA,CAALS,KAAK;IAAAC,UAAA,GAAAV,IAAA,CAAEW,KAAK;IAALA,KAAK,GAAAD,UAAA,cAAG,GAAG,GAAAA,UAAA;IAAEE,gBAAgB,GAAAZ,IAAA,CAAhBY,gBAAgB;IAAEC,UAAU,GAAAb,IAAA,CAAVa,UAAU;EAC/J,IAAMC,SAAS,GAAGnB,OAAO,CAACoB,OAAO,CAACC,MAAM,CAAC,IAAI,CAAC;EAC9C,IAAMC,OAAO,GAAGtB,OAAO,CAACoB,OAAO,CAACG,WAAW,CAAC,YAAM;IAC9C,IAAIC,EAAE;IACN,IAAMC,UAAU,GAAG,IAAIvB,SAAS,CAACwB,wBAAwB,EAAE;IAC3D,IAAMC,QAAQ,GAAG,CAACH,EAAE,GAAGL,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACS,OAAO,MAAM,IAAI,IAAIJ,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACK,aAAa,EAAE;IACvJ,IAAIF,QAAQ,EAAE;MACVF,UAAU,CACLK,eAAe,CAACC,SAAS,EAAEJ,QAAQ,CAAC,CACpCK,IAAI,CAAC,UAACC,MAAM,EAAK;QAClB3B,QAAQ,CAAC,IAAI,EAAE2B,MAAM,CAAC;MAC1B,CAAC,CAAC,CACGC,KAAK,CAAC,UAACC,GAAG,EAAK;QAChB7B,QAAQ,CAAC6B,GAAG,CAAC;MACjB,CAAC,CAAC;IACN;EACJ,CAAC,EAAE,CAAC7B,QAAQ,CAAC,CAAC;EACdN,OAAO,CAACoB,OAAO,CAACgB,SAAS,CAAC,YAAM;IAC5B,IAAIZ,EAAE,EAAEa,EAAE;IACV;IACA,IAAI,OAAOvB,KAAK,KAAK,SAAS,KAAK,CAACU,EAAE;IACtC;IACAc,SAAS,KAAK,IAAI;IAClB;IACAA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC;IAC7B;IACAA,SAAS,CAACC,YAAY,MAAM,IAAI,IAAIf,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACgB,uBAAuB,EAAE,CAAC1B,KAAK,CAAC,EAAE;MAC9F,IAAM2B,MAAM,GAAG,CAACJ,EAAE,GAAGlB,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACS,OAAO,MAAM,IAAI,IAAIS,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACK,KAAK,CAACC,SAAS;MACrJ,IAAMC,KAAK,GAAGH,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1F,IAAID,KAAK,IACLA,KAAK,CAACE,eAAe,EAAE,CAAChC,KAAK,IAC7B,CAAC8B,KAAK,CAACG,cAAc,EAAE,CAACjC,KAAK,EAAE;QAC/B8B,KAAK,CACAI,gBAAgB,CAAC;UAClBC,QAAQ,EAAE,CAAC;YAAEnC,KAAK,EAALA;UAAM,CAAC;QACxB,CAAC,CAAC,CACGoB,KAAK,CAAC,UAACC,GAAG;UAAA,OAAK7B,QAAQ,CAAC6B,GAAG,CAAC;QAAA,EAAC;MACtC;IACJ;EACJ,CAAC,EAAE,CAACrB,KAAK,EAAER,QAAQ,CAAC,CAAC;EACrBN,OAAO,CAACoB,OAAO,CAACgB,SAAS,CAAC,YAAM;IAC5B,IAAIZ,EAAE;IACN,IAAIN,UAAU,EAAE;MACZ,IAAIuB,MAAM,GAAG,CAACjB,EAAE,GAAGL,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACS,OAAO,MAAM,IAAI,IAAIJ,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACkB,KAAK,CAACC,SAAS;MACnJ,IAAIF,MAAM,EAAE;QACRA,MAAM,CAACS,SAAS,EAAE,CAACC,OAAO,CAAC,UAACP,KAAK,EAAK;UAClCH,MAAM,CAACW,WAAW,CAACR,KAAK,CAAC;UACzBA,KAAK,CAACS,IAAI,EAAE;QAChB,CAAC,CAAC;QACFZ,MAAM,GAAG,IAAI;MACjB;IACJ;EACJ,CAAC,EAAE,CAACvB,UAAU,CAAC,CAAC;EAChBlB,OAAO,CAACoB,OAAO,CAACgB,SAAS,CAAC,YAAM;IAC5B,IAAMkB,QAAQ,GAAGC,WAAW,CAACjC,OAAO,EAAEN,KAAK,CAAC;IAC5C,OAAO,YAAM;MACTwC,aAAa,CAACF,QAAQ,CAAC;IAC3B,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EACN,OAAQtD,OAAO,CAACoB,OAAO,CAACqC,aAAa,CAACtD,cAAc,CAACiB,OAAO,EAAE;IAAEX,KAAK,EAAEA,KAAK;IAAEE,MAAM,EAAEA,MAAM;IAAE+C,GAAG,EAAEvC,SAAS;IAAEwC,gBAAgB,EAAE,YAAY;IAAE1C,gBAAgB,EAAEA,gBAAgB,IAAI;MAC5KJ,UAAU,EAAVA;IACJ,CAAC;IAAE+C,KAAK,EAAE,KAAK;IAAEC,gBAAgB,EAAEtD;EAAQ,CAAC,CAAC;AACrD,CAAC;AACDT,OAAO,CAACsB,OAAO,GAAGhB,uBAAuB"},"metadata":{},"sourceType":"script"}