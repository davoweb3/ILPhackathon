{"ast":null,"code":"/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils.js';\nconst logging = utils.log;\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  if (!navigator.mediaDevices) {\n    return;\n  }\n  const constraintsToChrome_ = function (c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = typeof c[key] === 'object' ? c[key] : {\n        ideal: c[key]\n      };\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function (prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return name === 'deviceId' ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n  const shimConstraints_ = function (constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function (obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && (typeof face === 'object' ? face : {\n        ideal: face\n      });\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n      if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices().then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match => d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {\n                exact: dev.deviceId\n              } : {\n                ideal: dev.deviceId\n              };\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n  const shimError_ = function (e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n  const getUserMedia_ = function (constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}","map":{"version":3,"names":["utils","logging","log","shimGetUserMedia","window","browserDetails","navigator","mediaDevices","constraintsToChrome_","c","mandatory","optional","cc","Object","keys","forEach","key","r","ideal","exact","undefined","min","max","oldname_","prefix","name","charAt","toUpperCase","slice","oc","push","mix","advanced","concat","shimConstraints_","constraints","func","version","JSON","parse","stringify","audio","remap","obj","a","b","video","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","then","devices","filter","d","kind","dev","find","some","match","label","toLowerCase","includes","length","deviceId","shimError_","e","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","toString","getUserMedia_","onSuccess","onError","webkitGetUserMedia","getUserMedia","bind","origGetUserMedia","cs","stream","getAudioTracks","getVideoTracks","getTracks","track","stop","DOMException","Promise","reject"],"sources":["/home/cedarmat/Rezy/Frontend/Rezy Acme Company/node_modules/webrtc-adapter/src/js/chrome/getusermedia.js"],"sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}