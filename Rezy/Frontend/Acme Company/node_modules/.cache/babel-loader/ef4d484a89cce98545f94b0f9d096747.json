{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar EncodeHintType_1 = require(\"../core/EncodeHintType\");\nvar Encoder_1 = require(\"../core/qrcode/encoder/Encoder\");\nvar ErrorCorrectionLevel_1 = require(\"../core/qrcode/decoder/ErrorCorrectionLevel\");\nvar IllegalArgumentException_1 = require(\"../core/IllegalArgumentException\");\nvar IllegalStateException_1 = require(\"../core/IllegalStateException\");\n/**\n * @deprecated Moving to @zxing/browser\n */\nvar BrowserQRCodeSvgWriter = /** @class */function () {\n  function BrowserQRCodeSvgWriter() {}\n  /**\n   * Writes and renders a QRCode SVG element.\n   *\n   * @param contents\n   * @param width\n   * @param height\n   * @param hints\n   */\n  BrowserQRCodeSvgWriter.prototype.write = function (contents, width, height, hints) {\n    if (hints === void 0) {\n      hints = null;\n    }\n    if (contents.length === 0) {\n      throw new IllegalArgumentException_1.default('Found empty contents');\n    }\n    // if (format != BarcodeFormat.QR_CODE) {\n    //   throw new IllegalArgumentException(\"Can only encode QR_CODE, but got \" + format)\n    // }\n    if (width < 0 || height < 0) {\n      throw new IllegalArgumentException_1.default('Requested dimensions are too small: ' + width + 'x' + height);\n    }\n    var errorCorrectionLevel = ErrorCorrectionLevel_1.default.L;\n    var quietZone = BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE;\n    if (hints !== null) {\n      if (undefined !== hints.get(EncodeHintType_1.default.ERROR_CORRECTION)) {\n        errorCorrectionLevel = ErrorCorrectionLevel_1.default.fromString(hints.get(EncodeHintType_1.default.ERROR_CORRECTION).toString());\n      }\n      if (undefined !== hints.get(EncodeHintType_1.default.MARGIN)) {\n        quietZone = Number.parseInt(hints.get(EncodeHintType_1.default.MARGIN).toString(), 10);\n      }\n    }\n    var code = Encoder_1.default.encode(contents, errorCorrectionLevel, hints);\n    return this.renderResult(code, width, height, quietZone);\n  };\n  /**\n   * Renders the result and then appends it to the DOM.\n   */\n  BrowserQRCodeSvgWriter.prototype.writeToDom = function (containerElement, contents, width, height, hints) {\n    if (hints === void 0) {\n      hints = null;\n    }\n    if (typeof containerElement === 'string') {\n      containerElement = document.querySelector(containerElement);\n    }\n    var svgElement = this.write(contents, width, height, hints);\n    if (containerElement) containerElement.appendChild(svgElement);\n  };\n  /**\n   * Note that the input matrix uses 0 == white, 1 == black.\n   * The output matrix uses 0 == black, 255 == white (i.e. an 8 bit greyscale bitmap).\n   */\n  BrowserQRCodeSvgWriter.prototype.renderResult = function (code, width /*int*/, height /*int*/, quietZone /*int*/) {\n    var input = code.getMatrix();\n    if (input === null) {\n      throw new IllegalStateException_1.default();\n    }\n    var inputWidth = input.getWidth();\n    var inputHeight = input.getHeight();\n    var qrWidth = inputWidth + quietZone * 2;\n    var qrHeight = inputHeight + quietZone * 2;\n    var outputWidth = Math.max(width, qrWidth);\n    var outputHeight = Math.max(height, qrHeight);\n    var multiple = Math.min(Math.floor(outputWidth / qrWidth), Math.floor(outputHeight / qrHeight));\n    // Padding includes both the quiet zone and the extra white pixels to accommodate the requested\n    // dimensions. For example, if input is 25x25 the QR will be 33x33 including the quiet zone.\n    // If the requested size is 200x160, the multiple will be 4, for a QR of 132x132. These will\n    // handle all the padding from 100x100 (the actual QR) up to 200x160.\n    var leftPadding = Math.floor((outputWidth - inputWidth * multiple) / 2);\n    var topPadding = Math.floor((outputHeight - inputHeight * multiple) / 2);\n    var svgElement = this.createSVGElement(outputWidth, outputHeight);\n    for (var inputY = 0, outputY = topPadding; inputY < inputHeight; inputY++, outputY += multiple) {\n      // Write the contents of this row of the barcode\n      for (var inputX = 0, outputX = leftPadding; inputX < inputWidth; inputX++, outputX += multiple) {\n        if (input.get(inputX, inputY) === 1) {\n          var svgRectElement = this.createSvgRectElement(outputX, outputY, multiple, multiple);\n          svgElement.appendChild(svgRectElement);\n        }\n      }\n    }\n    return svgElement;\n  };\n  /**\n   * Creates a SVG element.\n   *\n   * @param w SVG's width attribute\n   * @param h SVG's height attribute\n   */\n  BrowserQRCodeSvgWriter.prototype.createSVGElement = function (w, h) {\n    var svgElement = document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS, 'svg');\n    svgElement.setAttributeNS(null, 'height', w.toString());\n    svgElement.setAttributeNS(null, 'width', h.toString());\n    return svgElement;\n  };\n  /**\n   * Creates a SVG rect element.\n   *\n   * @param x Element's x coordinate\n   * @param y Element's y coordinate\n   * @param w Element's width attribute\n   * @param h Element's height attribute\n   */\n  BrowserQRCodeSvgWriter.prototype.createSvgRectElement = function (x, y, w, h) {\n    var rect = document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS, 'rect');\n    rect.setAttributeNS(null, 'x', x.toString());\n    rect.setAttributeNS(null, 'y', y.toString());\n    rect.setAttributeNS(null, 'height', w.toString());\n    rect.setAttributeNS(null, 'width', h.toString());\n    rect.setAttributeNS(null, 'fill', '#000000');\n    return rect;\n  };\n  BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE = 4;\n  /**\n   * SVG markup NameSpace\n   */\n  BrowserQRCodeSvgWriter.SVG_NS = 'http://www.w3.org/2000/svg';\n  return BrowserQRCodeSvgWriter;\n}();\nexports.BrowserQRCodeSvgWriter = BrowserQRCodeSvgWriter;","map":{"version":3,"names":["EncodeHintType_1","require","Encoder_1","ErrorCorrectionLevel_1","IllegalArgumentException_1","IllegalStateException_1","BrowserQRCodeSvgWriter","prototype","write","contents","width","height","hints","length","default","errorCorrectionLevel","L","quietZone","QUIET_ZONE_SIZE","undefined","get","ERROR_CORRECTION","fromString","toString","MARGIN","Number","parseInt","code","encode","renderResult","writeToDom","containerElement","document","querySelector","svgElement","appendChild","input","getMatrix","inputWidth","getWidth","inputHeight","getHeight","qrWidth","qrHeight","outputWidth","Math","max","outputHeight","multiple","min","floor","leftPadding","topPadding","createSVGElement","inputY","outputY","inputX","outputX","svgRectElement","createSvgRectElement","w","h","createElementNS","SVG_NS","setAttributeNS","x","y","rect","exports"],"sources":["../../src/browser/BrowserQRCodeSvgWriter.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script"}