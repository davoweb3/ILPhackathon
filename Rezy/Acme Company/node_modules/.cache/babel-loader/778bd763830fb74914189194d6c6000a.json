{"ast":null,"code":"/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport { shimGetUserMedia } from './getusermedia';\nexport { shimGetDisplayMedia } from './getdisplaymedia';\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n}\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' || !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      const nativeMethod = window.RTCPeerConnection.prototype[method];\n      const methodObj = {\n        [method]() {\n          arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }\n      };\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  }\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null]).then(stats => {\n      if (browserDetails.version < 53 && !onSucc) {\n        // Shim only promise getStats with spec-hyphens in type names\n        // Leave callback version alone; misc old uses of forEach before Map\n        try {\n          stats.forEach(stat => {\n            stat.type = modernStatsTypes[stat.type] || stat.type;\n          });\n        } catch (e) {\n          if (e.name !== 'TypeError') {\n            throw e;\n          }\n          // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n          stats.forEach((stat, i) => {\n            stats.set(i, Object.assign({}, stat, {\n              type: modernStatsTypes[stat.type] || stat.type\n            }));\n          });\n        }\n      }\n      return stats;\n    }).then(onSucc, onErr);\n  };\n}\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map());\n  };\n}\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection || 'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    utils.deprecated('removeStream', 'removeTrack');\n    this.getSenders().forEach(sender => {\n      if (sender.track && stream.getTracks().includes(sender.track)) {\n        this.removeTrack(sender);\n      }\n    });\n  };\n}\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\n      this.setParametersPromises = [];\n      const initParameters = arguments[1];\n      const shouldPerformCheck = initParameters && 'sendEncodings' in initParameters;\n      if (shouldPerformCheck) {\n        // If sendEncodings params are provided, validate grammar\n        initParameters.sendEncodings.forEach(encodingParam => {\n          if ('rid' in encodingParam) {\n            const ridRegex = /^[a-z0-9]{0,16}$/i;\n            if (!ridRegex.test(encodingParam.rid)) {\n              throw new TypeError('Invalid RID value provided.');\n            }\n          }\n          if ('scaleResolutionDownBy' in encodingParam) {\n            if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n              throw new RangeError('scale_resolution_down_by must be >= 1.0');\n            }\n          }\n          if ('maxFramerate' in encodingParam) {\n            if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n              throw new RangeError('max_framerate must be >= 0.0');\n            }\n          }\n        });\n      }\n      const transceiver = origAddTransceiver.apply(this, arguments);\n      if (shouldPerformCheck) {\n        // Check if the init options were applied. If not we do this in an\n        // asynchronous way and save the promise reference in a global object.\n        // This is an ugly hack, but at the same time is way more robust than\n        // checking the sender parameters before and after the createOffer\n        // Also note that after the createoffer we are not 100% sure that\n        // the params were asynchronously applied so we might miss the\n        // opportunity to recreate offer.\n        const {\n          sender\n        } = transceiver;\n        const params = sender.getParameters();\n        if (!('encodings' in params) ||\n        // Avoid being fooled by patched getParameters() below.\n        params.encodings.length === 1 && Object.keys(params.encodings[0]).length === 0) {\n          params.encodings = initParameters.sendEncodings;\n          sender.sendEncodings = initParameters.sendEncodings;\n          this.setParametersPromises.push(sender.setParameters(params).then(() => {\n            delete sender.sendEncodings;\n          }).catch(() => {\n            delete sender.sendEncodings;\n          }));\n        }\n      }\n      return transceiver;\n    };\n  }\n}\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters = function getParameters() {\n      const params = origGetParameters.apply(this, arguments);\n      if (!('encodings' in params)) {\n        params.encodings = [].concat(this.sendEncodings || [{}]);\n      }\n      return params;\n    };\n  }\n}\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(() => {\n        return origCreateOffer.apply(this, arguments);\n      }).finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      }).finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}","map":{"version":3,"names":["utils","shimGetUserMedia","shimGetDisplayMedia","shimOnTrack","window","RTCTrackEvent","prototype","Object","defineProperty","get","receiver","shimPeerConnection","browserDetails","RTCPeerConnection","mozRTCPeerConnection","version","forEach","method","nativeMethod","methodObj","arguments","RTCIceCandidate","RTCSessionDescription","apply","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","nativeGetStats","getStats","selector","onSucc","onErr","then","stats","stat","type","e","name","i","set","assign","shimSenderGetStats","RTCRtpSender","origGetSenders","getSenders","senders","sender","_pc","origAddTrack","addTrack","track","Promise","resolve","Map","shimReceiverGetStats","RTCRtpReceiver","origGetReceivers","getReceivers","receivers","wrapPeerConnectionEvent","srcElement","shimRemoveStream","removeStream","stream","deprecated","getTracks","includes","removeTrack","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","ridRegex","test","rid","TypeError","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","transceiver","params","getParameters","encodings","length","keys","push","setParameters","catch","shimGetParameters","origGetParameters","concat","shimCreateOffer","origCreateOffer","createOffer","all","finally","shimCreateAnswer","origCreateAnswer","createAnswer"],"sources":["/home/cedarmat/rezy2/rezyonrafiki/Rezy/Frontend/Rezy Acme Company/node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js"],"sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        const initParameters = arguments[1];\n        const shouldPerformCheck = initParameters &&\n                                  'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateOffer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}